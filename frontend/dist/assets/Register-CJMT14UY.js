import{a as N,r as t,j as e,L as k,b as x}from"./index-D_DsbWCf.js";import{O as j}from"./Button-DzU7FP4E.js";function g(){const{n:p}=N(),[a,y]=t.useState({email:"",username:"",password:"",confirmPassword:"",playerName:""}),[s,u]=t.useState({}),[c,h]=t.useState(!1),[i,n]=t.useState(""),o=r=>{const{name:l,value:m}=r.target;y(d=>({...d,[l]:m})),s[l]&&u(d=>({...d,[l]:""})),i&&n("")},f=()=>{const r={};return a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(r.email="Please enter a valid email address"):r.email="Email is required",a.username.trim()?/^[a-zA-Z0-9_]{3,20}$/.test(a.username)||(r.username="Username must be 3-20 characters, alphanumeric and underscores only"):r.username="Username is required",a.password?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/.test(a.password)||(r.password="Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 number"):r.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",a.playerName.trim()?/^[a-zA-Z0-9\s\-']{2,50}$/.test(a.playerName)||(r.playerName="Player name must be 2-50 characters, letters, numbers, spaces, hyphens, apostrophes only"):r.playerName="Player name is required",u(r),Object.keys(r).length===0},w=async r=>{if(r.preventDefault(),!!f()){h(!0),n("");try{const{confirmPassword:l,...m}=a;await x.register(m),p("home")}catch(l){n(l.message||"Registration failed. Please try again.")}finally{h(!1)}}};return e.jsx("section",{className:"oyk-page oyk-auth",children:e.jsxs("div",{className:"oyk-auth-container",children:[e.jsxs("div",{className:"oyk-auth-header",children:[e.jsx("h1",{className:"oyk-auth-header-title",children:"Create your account"}),e.jsxs("p",{className:"oyk-auth-header-subtitle",children:["Or"," ",e.jsx(k,{routeName:"login",className:"oyk-auth-header-subtitle",children:"sign in to your existing account"})]})]}),e.jsxs("form",{className:"oyk-auth-form",onSubmit:w,children:[i&&e.jsx("div",{className:"oyk-auth-error",children:e.jsx("div",{className:"oyk-auth-error-message",children:i})}),e.jsxs("div",{className:"oyk-auth-field",children:[e.jsx("label",{htmlFor:"email",className:"oyk-auth-field-label",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:o,className:`oyk-auth-field-input ${s.email?"oyk-auth-field-input--error":""}`,placeholder:"Enter your email"}),s.email&&e.jsx("p",{className:"oyk-auth-field-error",children:s.email})]}),e.jsxs("div",{className:"oyk-auth-field",children:[e.jsx("label",{htmlFor:"username",className:"oyk-auth-field-label",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:a.username,onChange:o,className:`oyk-auth-field-input ${s.username?"oyk-auth-field-input--error":""}`,placeholder:"Enter your username"}),s.username&&e.jsx("p",{className:"oyk-auth-field-error",children:s.username})]}),e.jsxs("div",{className:"oyk-auth-field",children:[e.jsx("label",{htmlFor:"playerName",className:"oyk-auth-field-label",children:"Player Name"}),e.jsx("input",{id:"playerName",name:"playerName",type:"text",autoComplete:"name",required:!0,value:a.playerName,onChange:o,className:`oyk-auth-field-input ${s.playerName?"oyk-auth-field-input--error":""}`,placeholder:"Enter your player name"}),s.playerName&&e.jsx("p",{className:"oyk-auth-field-error",children:s.playerName})]}),e.jsxs("div",{className:"oyk-auth-field",children:[e.jsx("label",{htmlFor:"password",className:"oyk-auth-field-label",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:a.password,onChange:o,className:`oyk-auth-field-input ${s.password?"oyk-auth-field-input--error":""}`,placeholder:"Enter your password"}),s.password&&e.jsx("p",{className:"oyk-auth-field-error",children:s.password})]}),e.jsxs("div",{className:"oyk-auth-field",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"oyk-auth-field-label",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:a.confirmPassword,onChange:o,className:`oyk-auth-field-input ${s.confirmPassword?"oyk-auth-field-input--error":""}`,placeholder:"Confirm your password"}),s.confirmPassword&&e.jsx("p",{className:"oyk-auth-field-error",children:s.confirmPassword})]}),e.jsx(j,{type:"submit",color:"primary",disabled:c,block:!0,children:c?"Creating account...":"Create account"})]})]})})}export{g as default};
